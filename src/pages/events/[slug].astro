---
import { getCollection, type CollectionEntry } from 'astro:content';
import EventLayout from '@layouts/EventLayout.astro';

export async function getStaticPaths() {
  const events = await getCollection('events');
  return events.map((event) => ({
    params: { slug: event.slug },
    props: { event },
  }));
}

interface Props {
  event: CollectionEntry<'events'>;
}

const { event } = Astro.props;
const { Content } = await event.render();
---

<EventLayout
  title={event.data.title}
  eventDate={event.data.eventDate}
  eventEndDate={event.data.eventEndDate}
  location={event.data.location}
  registrationUrl={event.data.registrationUrl}
  capacity={event.data.capacity}
  status={event.data.status}
  tags={event.data.tags}
  speakers={event.data.speakers}
  featuredImage={event.data.featuredImage}
>
  <Content />
</EventLayout>
